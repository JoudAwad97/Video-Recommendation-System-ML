# =============================================================================
# Video Recommendation System - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values.
# Never commit .env to version control!
# =============================================================================

# -----------------------------------------------------------------------------
# General Settings
# -----------------------------------------------------------------------------

# Environment: dev, staging, prod, local, test
ENVIRONMENT=dev

# Service identification
SERVICE_NAME=video-recommendation-service
SERVICE_VERSION=1.0.0

# Debug mode (true/false)
DEBUG=false

# Logging
LOG_LEVEL=INFO                    # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FORMAT=json                   # json or text

# -----------------------------------------------------------------------------
# AWS Settings
# -----------------------------------------------------------------------------

AWS_REGION=us-east-2
AWS_DEFAULT_REGION=us-east-2
# AWS_ACCOUNT_ID=123456789012     # Optional: auto-detected if not set

# S3 Buckets (required for production)
DATA_BUCKET=your-data-bucket
MODEL_BUCKET=your-model-bucket
ARTIFACTS_BUCKET=your-artifacts-bucket

# DynamoDB Tables (required for production)
USER_FEATURES_TABLE=VideoRecSystem-dev-user-features
VIDEO_FEATURES_TABLE=VideoRecSystem-dev-video-features
RECOMMENDATIONS_CACHE_TABLE=VideoRecSystem-dev-recommendations-cache

# SageMaker (optional)
SAGEMAKER_ROLE_ARN=arn:aws:iam::123456789012:role/SageMakerRole

# -----------------------------------------------------------------------------
# Feature Store Settings
# -----------------------------------------------------------------------------

# Use SageMaker Feature Store (true/false)
USE_SAGEMAKER_FEATURE_STORE=false
FEATURE_STORE_REGION=us-east-2
USER_FEATURE_GROUP=user-features
VIDEO_FEATURE_GROUP=video-features

# Use DynamoDB as feature store (true/false)
USE_DYNAMODB_FEATURE_STORE=true

# -----------------------------------------------------------------------------
# Redis / ElastiCache Settings
# -----------------------------------------------------------------------------

# Enable Redis caching (true/false)
USE_REDIS=false

# Redis connection
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=                   # Leave empty for no auth
REDIS_SSL=false
REDIS_DB=0

# Connection settings
REDIS_MAX_CONNECTIONS=10
REDIS_SOCKET_TIMEOUT=5.0
REDIS_CONNECT_TIMEOUT=5.0

# ElastiCache (for AWS deployment)
ELASTICACHE_ENDPOINT=
REDIS_CLUSTER_MODE=false

# -----------------------------------------------------------------------------
# Vector Store Settings
# -----------------------------------------------------------------------------

# Type: in_memory, faiss, pinecone, opensearch
VECTOR_STORE_TYPE=in_memory
VECTOR_STORE_ENDPOINT=

# For Pinecone
VECTOR_STORE_API_KEY=

# S3 location for embeddings
VECTOR_STORE_S3_KEY=vector_store/vector_index.npz
VIDEO_FEATURES_S3_KEY=vector_store/video_features.json

# Index configuration
EMBEDDING_DIM=16
VECTOR_INDEX_TYPE=Flat            # Flat, IVF, HNSW
VECTOR_INDEX_NLIST=100
VECTOR_INDEX_NPROBE=10

# -----------------------------------------------------------------------------
# Serving Settings
# -----------------------------------------------------------------------------

# Recommendation parameters
DEFAULT_NUM_RECOMMENDATIONS=20
MAX_NUM_RECOMMENDATIONS=100
MIN_CANDIDATES=50
CANDIDATE_MULTIPLIER=5

# Diversity settings
ENABLE_DIVERSITY=true
DIVERSITY_WEIGHT=0.3
CATEGORY_DIVERSITY_WEIGHT=0.5

# Filtering settings
ENABLE_FILTERING=true
FILTER_WATCHED=true
FILTER_BLOCKED=true

# Model paths (for Lambda)
MODEL_PATH=/opt/ml/model
ARTIFACTS_PATH=/opt/ml/artifacts

# Timeouts
SERVING_TIMEOUT_MS=5000
RETRIEVAL_TIMEOUT_MS=1000
RANKING_TIMEOUT_MS=2000

# -----------------------------------------------------------------------------
# API Settings
# -----------------------------------------------------------------------------

# API Gateway URL (for testing)
API_URL=https://your-api-id.execute-api.us-east-2.amazonaws.com/dev

# Rate limiting
API_RATE_LIMIT=50                 # requests per second
API_BURST_LIMIT=100

# -----------------------------------------------------------------------------
# ML Pipeline Settings
# -----------------------------------------------------------------------------

# Training configuration
TRAINING_INSTANCE_TYPE=ml.m5.xlarge
TRAINING_INSTANCE_COUNT=1
TRAINING_MAX_RUNTIME_SECONDS=86400

# Model registry
MODEL_REGISTRY_NAME=video-recommendation-models

# -----------------------------------------------------------------------------
# Monitoring Settings
# -----------------------------------------------------------------------------

# Enable CloudWatch metrics
ENABLE_METRICS=true
METRICS_NAMESPACE=VideoRecSystem

# Enable X-Ray tracing
ENABLE_XRAY=true

# A/B Testing
AB_TEST_ENABLED=false
AB_TEST_TRAFFIC_SPLIT=0.5

# -----------------------------------------------------------------------------
# Development Settings (local only)
# -----------------------------------------------------------------------------

# Local data paths
LOCAL_DATA_DIR=./data
LOCAL_MODEL_DIR=./models
LOCAL_ARTIFACTS_DIR=./artifacts

# Synthetic data generation
SYNTHETIC_NUM_USERS=1000
SYNTHETIC_NUM_VIDEOS=500
SYNTHETIC_NUM_INTERACTIONS=10000
